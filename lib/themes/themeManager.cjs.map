{"version":3,"file":"themeManager.cjs","sources":["../../src/themes/themeManager.ts"],"sourcesContent":[null],"names":["DEFAULT_STORAGE_KEY","DEFAULT_PREFIX","ThemeManager","constructor","options","currentTheme","listeners","Set","themeHistory","maxHistorySize","themeRegistry","Map","destroyed","themeCache","storageKey","prefix","loadThemeRegistry","autoApply","restore","applyTheme","colorOrName","primaryColor","themeName","preset","getPresetTheme","color","name","themes","generateThemePalettes","preserveInput","injectThemedCssVariables","createdAt","Date","now","updatedAt","version","addToHistory","save","notifyListeners","applyPresetTheme","Error","getCurrentTheme","exportTheme","JSON","stringify","importTheme","themeData","theme","parse","error","message","detectSystemTheme","window","matchMedia","matches","watchSystemTheme","callback","cleanupSystemThemeWatcher","systemThemeMediaQuery","systemThemeHandler","e","addEventListener","removeEventListener","undefined","downloadTheme","filename","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","style","display","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","localStorage","setItem","console","stored","getItem","clear","removeItem","onChange","listener","add","delete","forEach","getPresets","presetThemes","createChildTheme","parentName","childName","overrides","parentTheme","getTheme","childTheme","parent","registerTheme","cached","get","has","set","size","MAX_REGISTRY_SIZE","firstKey","keys","next","value","saveThemeRegistry","Array","from","entries","updateThemeVersion","lastTheme","lightTheme","isDark","unshift","length","pop","getThemeHistory","rollbackTheme","steps","warn","historicalTheme","enableAIIntegration","apiKey","aiIntegration","ColorAI","getAISuggestions","context","getSuggestions","mood","industry","applyAISuggestedTheme","index","suggestions","colors","toHex","compareThemes","theme1Name","theme2Name","theme1","theme2","differences","similarityScore","push","similarity","exportAllThemes","current","history","registry","importAllThemes","data","slice","destroy","defaultThemeManager","once","restoreTheme"],"mappings":"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"}