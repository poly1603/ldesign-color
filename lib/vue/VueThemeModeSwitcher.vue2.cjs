"use strict";/*!
 * ***********************************
 * @ldesign/color v1.0.0           *
 * Built with rollup               *
 * Build time: 2024-10-21 14:32:31 *
 * Build mode: production          *
 * Minified: No                    *
 * ***********************************
 */Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue"),c=require("lucide-vue-next"),L=require("../locales/index.cjs");const N={class:"theme-mode-switcher"},S=["title"],V={class:"theme-label"},q=["onClick"],D={class:"option-label"};var _=e.defineComponent({__name:"VueThemeModeSwitcher",props:{defaultMode:{type:String,required:!1},storageKey:{type:String,required:!1}},emits:["update:mode","change"],setup(b,{emit:w}){const s=b,p=w,k=s.storageKey||"ld-theme-mode",o=e.ref(!1),a=e.ref("system"),u=e.ref("light"),d=e.inject("locale",null),f=e.computed(()=>d&&d.value?d.value:"zh-CN"),i=e.computed(()=>L.getLocale(f.value));e.watch(f,t=>{});const r=e.computed(()=>[{value:"light",label:i.value.themeMode.light,icon:c.Sun},{value:"dark",label:i.value.themeMode.dark,icon:c.Moon},{value:"system",label:i.value.themeMode.system,icon:c.Monitor}]),g=e.computed(()=>r.value.find(t=>t.value===a.value)?.label||"\u4E3B\u9898"),B=e.computed(()=>r.value.find(t=>t.value===a.value)?.icon||c.Sun),y=e.computed(()=>a.value==="system"?u.value:a.value),m=window.matchMedia("(prefers-color-scheme: dark)"),v=()=>{u.value=m.matches?"dark":"light"},h=t=>{const l=document.documentElement;t==="dark"?l.setAttribute("theme-mode","dark"):l.removeAttribute("theme-mode"),l.setAttribute("data-theme-mode",t),l.classList.remove("light","dark"),l.classList.add(t)},M=()=>{o.value=!o.value},E=t=>{a.value=t,localStorage.setItem(k,t),o.value=!1,p("update:mode",t),p("change",t)},C=t=>{t.target.closest(".theme-mode-switcher")||(o.value=!1)};return e.watch(y,t=>{h(t)}),e.watch(u,()=>{a.value==="system"&&h(u.value)}),e.onMounted(()=>{v(),m.addEventListener("change",v);const t=localStorage.getItem(k);t&&r.value.some(l=>l.value===t)?a.value=t:s.defaultMode&&(a.value=s.defaultMode),h(y.value),document.addEventListener("click",C)}),e.onUnmounted(()=>{m.removeEventListener("change",v),document.removeEventListener("click",C)}),(t,l)=>(e.openBlock(),e.createElementBlock("div",N,[e.createElementVNode("button",{class:"theme-mode-button",title:g.value,onClick:M},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(B.value),{class:"theme-icon"})),e.createElementVNode("span",V,e.toDisplayString(g.value),1),e.createVNode(e.unref(c.ChevronDown),{class:e.normalizeClass(["arrow",{open:o.value}])},null,8,["class"])],8,S),e.createVNode(e.Transition,{name:"dropdown"},{default:e.withCtx(()=>[o.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"theme-dropdown",onClick:l[0]||(l[0]=e.withModifiers(()=>{},["stop"]))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,n=>(e.openBlock(),e.createElementBlock("button",{key:n.value,class:e.normalizeClass(["theme-option",{active:a.value===n.value}]),onClick:z=>E(n.value)},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.icon),{class:"option-icon"})),e.createElementVNode("span",D,e.toDisplayString(n.label),1),a.value===n.value?(e.openBlock(),e.createBlock(e.unref(c.Check),{key:0,class:"check-icon"})):e.createCommentVNode("v-if",!0)],10,q))),128))])):e.createCommentVNode("v-if",!0)]),_:1})]))}});exports.default=_;/*! End of @ldesign/color | Powered by @ldesign/builder */
//# sourceMappingURL=VueThemeModeSwitcher.vue2.cjs.map
