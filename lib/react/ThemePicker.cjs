"use strict";/*!
 * ***********************************
 * @ldesign/color v1.0.0           *
 * Built with rollup               *
 * Build time: 2024-10-21 14:32:31 *
 * Build mode: production          *
 * Minified: No                    *
 * ***********************************
 */var t=require("vue"),a=require("react"),j=require("./useTheme.cjs");const D=({value:r,onChange:n,showArrow:M=!0,showSearch:T=!1,showCustom:A=!1,prefix:B="ld",storageKey:$})=>{const i=a.useRef(null),[u,d]=a.useState(!1),[m,q]=a.useState(""),[o,f]=a.useState("#1890ff"),[K,P]=a.useState({}),{presets:h,primaryColor:p,themeName:c,applyTheme:k,applyPresetTheme:g,restoreTheme:S}=j.useTheme({prefix:B,storageKey:$}),s=a.useMemo(()=>r||p||"#1890ff",[r,p]),z=a.useMemo(()=>h.find(e=>e.name===c)?.label||"\u4E3B\u9898\u8272",[h,c]),v=a.useMemo(()=>{const e=[...h];return e.some(l=>l.color.toLowerCase()===(s||"").toLowerCase())||e.unshift({name:"custom",label:"\u81EA\u5B9A\u4E49",color:s,custom:!0}),e},[h,s]),U=a.useMemo(()=>{if(!m)return v;const e=m.toLowerCase();return v.filter(l=>l.label.toLowerCase().includes(e)||l.name.toLowerCase().includes(e)||l.color.toLowerCase().includes(e))},[v,m]),N=a.useCallback(()=>{if(!i.current)return;const e=i.current.getBoundingClientRect(),l=400,x=window.innerWidth,E=window.innerHeight,y=Math.min(320,Math.max(240,x-16)),L=E-e.bottom,I=e.top;let C=e.bottom+4;L<l&&I>L&&(C=e.top-l-4),C=Math.max(8,Math.min(C,E-8-l));let w=e.left;const R=x-8-y;w=Math.max(8,Math.min(w,Math.max(8,R))),P({position:"fixed",top:`${C}px`,left:`${w}px`,width:`${y}px`,zIndex:9999})},[]),W=a.useCallback(()=>{d(e=>(e||queueMicrotask(()=>N()),!e))},[N]),H=a.useCallback(e=>{g(e.name),n?.(e.color,e),d(!1)},[g,n]),V=a.useCallback(()=>{o&&(k(o),n?.(o),d(!1))},[o,k,n]),b=a.useCallback(e=>{i.current?.contains(e.target)||d(!1)},[]),_=a.useCallback(()=>{u&&N()},[u,N]);return a.useEffect(()=>(S(),document.addEventListener("click",b),window.addEventListener("resize",_),window.addEventListener("scroll",_),()=>{document.removeEventListener("click",b),window.removeEventListener("resize",_),window.removeEventListener("scroll",_)}),[]),a.useEffect(()=>{r&&r!==p&&k(r)},[r,p,k]),t.createVNode("div",{className:"ld-theme-picker",ref:i},[t.createVNode("button",{className:"ld-theme-picker__trigger",onClick:W,style:{backgroundColor:s},title:z},[t.createVNode("span",{className:"ld-theme-picker__color",style:{backgroundColor:s}},null,4),M&&t.createVNode("svg",{className:`ld-theme-picker__arrow ${u?"is-open":""}`,width:"12",height:"12",viewBox:"0 0 12 12"},[t.createVNode("path",{d:"M2.5 4.5L6 8L9.5 4.5",stroke:"currentColor",strokeWidth:"1.5",fill:"none"},null)],8,["className"])],12,["onClick","title"]),u&&t.createVNode("div",{className:"ld-theme-picker__dropdown",style:K,onClick:e=>e.stopPropagation()},[T&&t.createVNode("div",{className:"ld-theme-picker__search"},[t.createVNode("input",{value:m,onChange:e=>q(e.target.value),type:"text",placeholder:"\u641C\u7D22\u989C\u8272...",className:"ld-theme-picker__search-input"},null,40,["value","onChange"])]),t.createVNode("div",{className:"ld-theme-picker__content"},[A&&t.createVNode("div",{className:"ld-theme-picker__custom"},[t.createVNode("label",{className:"ld-theme-picker__label"},[t.createTextVNode("\u81EA\u5B9A\u4E49\u989C\u8272")]),t.createVNode("div",{className:"ld-theme-picker__custom-input"},[t.createVNode("input",{value:o,onChange:e=>f(e.target.value),type:"color",className:"ld-theme-picker__color-input"},null,40,["value","onChange"]),t.createVNode("input",{value:o,onChange:e=>f(e.target.value),onKeyUp:e=>e.key==="Enter"&&V(),type:"text",placeholder:"#000000",className:"ld-theme-picker__hex-input"},null,40,["value","onChange","onKeyUp"]),t.createVNode("button",{className:"ld-theme-picker__apply-btn",onClick:V},[t.createTextVNode("\u5E94\u7528")],8,["onClick"])])]),t.createVNode("div",{className:"ld-theme-picker__presets"},[t.createVNode("label",{className:"ld-theme-picker__label"},[t.createTextVNode("\u9009\u62E9\u4E3B\u9898\u8272")]),t.createVNode("div",{className:"ld-theme-picker__grid"},[U.map(e=>t.createVNode("div",{key:`${e.name}-${e.color}`,className:`ld-theme-picker__preset ${e.name===c||!c&&e.custom?"is-active":""}`,onClick:()=>H(e)},[t.createVNode("span",{className:"ld-theme-picker__preset-color",style:{backgroundColor:e.color},title:e.label},[(e.name===c||!c&&e.custom)&&t.createVNode("svg",{className:"ld-theme-picker__check",width:"16",height:"16",viewBox:"0 0 16 16"},[t.createVNode("path",{d:"M3 8L6 11L13 4",stroke:"white",strokeWidth:"2",fill:"none"},null)])],12,["title"]),t.createVNode("span",{className:"ld-theme-picker__preset-label"},[e.custom?"\u81EA\u5B9A\u4E49":e.label])],8,["className","onClick"]))])])])],12,["onClick"])],512)};exports.ThemePicker=D;/*! End of @ldesign/color | Powered by @ldesign/builder */
//# sourceMappingURL=ThemePicker.cjs.map
