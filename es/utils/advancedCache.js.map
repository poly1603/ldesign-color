{"version":3,"file":"advancedCache.js","sources":["../../src/utils/advancedCache.ts"],"sourcesContent":[null],"names":["AdvancedColorCache","constructor","maxSize","strategy","persistKey","persistTimer","isDirty","persistDelay","cache","Map","stats","hits","misses","restore","get","key","item","frequency","lastAccess","Date","now","delete","set","value","size","has","evict","existing","createdAt","schedulePersist","clearTimeout","window","setTimeout","requestIdleCallback","persist","error","console","warn","timeout","keyToRemove","minFreq","Infinity","oldestTime","entries","oldestCreate","keys","next","clear","getStats","total","hitRate","utilization","prewarm","data","getMostFrequent","map","serialized","JSON","stringify","timestamp","length","localStorage","setItem","process","env","NODE_ENV","stored","getItem","parse","removeItem","count","Array","from","sort","a","b","slice","optimize","frequencies","values","threshold","reduce","setStrategy","snapshot","destroy","globalColorCache","addEventListener","once","document","hidden","functionCaches","WeakMap","memoize","fn","options","memoized","args","getKey","cached","undefined","result","clearCache","destroyCache","createCacheKey","v","String","join"],"mappings":"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"}